<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1259px" preserveAspectRatio="none" style="width:1869px;height:1259px;background:#FFFFFF;" version="1.1" viewBox="0 0 1869 1259" width="1869px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1078.3379" style="stroke:#181818;stroke-width:1.0;" width="10" x="23" y="91.4883"/><rect fill="#FFFFFF" height="1048.0273" style="stroke:#181818;stroke-width:1.0;" width="10" x="234" y="112.7988"/><rect fill="#FFFFFF" height="1027.7168" style="stroke:#181818;stroke-width:1.0;" width="10" x="480" y="142.1094"/><rect fill="#FFFFFF" height="931.7852" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="238.041"/><rect fill="#FFFFFF" height="782.2324" style="stroke:#181818;stroke-width:1.0;" width="10" x="490" y="387.5938"/><rect fill="#FFFFFF" height="724.9668" style="stroke:#181818;stroke-width:1.0;" width="10" x="495" y="444.8594"/><rect fill="#FFFFFF" height="667.7012" style="stroke:#181818;stroke-width:1.0;" width="10" x="500" y="502.125"/><rect fill="#FFFFFF" height="610.4355" style="stroke:#181818;stroke-width:1.0;" width="10" x="505" y="559.3906"/><rect fill="#FFFFFF" height="553.1699" style="stroke:#181818;stroke-width:1.0;" width="10" x="510" y="616.6563"/><rect fill="#FFFFFF" height="495.9043" style="stroke:#181818;stroke-width:1.0;" width="10" x="515" y="673.9219"/><rect fill="#FFFFFF" height="446.5938" style="stroke:#181818;stroke-width:1.0;" width="10" x="520" y="723.2324"/><rect fill="#FFFFFF" height="397.2832" style="stroke:#181818;stroke-width:1.0;" width="10" x="525" y="772.543"/><rect fill="#FFFFFF" height="354.9727" style="stroke:#181818;stroke-width:1.0;" width="10" x="530" y="814.8535"/><rect fill="#FFFFFF" height="312.6621" style="stroke:#181818;stroke-width:1.0;" width="10" x="535" y="857.1641"/><rect fill="#FFFFFF" height="270.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="540" y="899.4746"/><rect fill="#FFFFFF" height="228.041" style="stroke:#181818;stroke-width:1.0;" width="10" x="545" y="941.7852"/><rect fill="#FFFFFF" height="185.7305" style="stroke:#181818;stroke-width:1.0;" width="10" x="550" y="984.0957"/><rect fill="#FFFFFF" height="105.1094" style="stroke:#181818;stroke-width:1.0;" width="10" x="555" y="1026.4063"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="882" y="171.4199"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1090" y="296.6621"/><rect height="478.1914" style="stroke:#000000;stroke-width:1.5;fill:none;" width="813" x="354.5" y="258.041"/><rect height="345.9492" style="stroke:#000000;stroke-width:1.5;fill:none;" width="265.5" x="364.5" y="340.9727"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="81.4883" y2="1178.8262"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="238.5" x2="238.5" y1="81.4883" y2="1178.8262"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="484.5" x2="484.5" y1="81.4883" y2="1178.8262"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="886.5" x2="886.5" y1="81.4883" y2="1178.8262"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1094.5" x2="1094.5" y1="81.4883" y2="1178.8262"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1739" x2="1739" y1="1070.1504" y2="1178.8262"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="5" y="78.5352">Client</text><ellipse cx="28" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28,21.5 L28,48.5 M15,29.5 L41,29.5 M28,48.5 L15,63.5 M28,48.5 L41,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="5" y="1191.3613">Client</text><ellipse cx="28" cy="1202.8145" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28,1210.8145 L28,1237.8145 M15,1218.8145 L41,1218.8145 M28,1237.8145 L15,1252.8145 M28,1237.8145 L41,1252.8145 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="170.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="177.5" y="70.5352">ProductController</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="170.5" y="1177.8262"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="177.5" y="1198.3613">ProductController</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="374.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207" x="381.5" y="70.5352">productService:ProductService</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="374.5" y="1177.8262"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207" x="381.5" y="1198.3613">productService:ProductService</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="271" x="751.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="257" x="758.5" y="70.5352">productRepository:ProductRepository</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="271" x="751.5" y="1177.8262"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="257" x="758.5" y="1198.3613">productRepository:ProductRepository</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1032.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1039.5" y="70.5352">product:Product</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1032.5" y="1177.8262"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1039.5" y="1198.3613">product:Product</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="248" x="1615" y="1177.8262"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="234" x="1622" y="1198.3613">aggregateRating:AggregateRating</text><rect fill="#FFFFFF" height="1078.3379" style="stroke:#181818;stroke-width:1.0;" width="10" x="23" y="91.4883"/><rect fill="#FFFFFF" height="1048.0273" style="stroke:#181818;stroke-width:1.0;" width="10" x="234" y="112.7988"/><rect fill="#FFFFFF" height="1027.7168" style="stroke:#181818;stroke-width:1.0;" width="10" x="480" y="142.1094"/><rect fill="#FFFFFF" height="931.7852" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="238.041"/><rect fill="#FFFFFF" height="782.2324" style="stroke:#181818;stroke-width:1.0;" width="10" x="490" y="387.5938"/><rect fill="#FFFFFF" height="724.9668" style="stroke:#181818;stroke-width:1.0;" width="10" x="495" y="444.8594"/><rect fill="#FFFFFF" height="667.7012" style="stroke:#181818;stroke-width:1.0;" width="10" x="500" y="502.125"/><rect fill="#FFFFFF" height="610.4355" style="stroke:#181818;stroke-width:1.0;" width="10" x="505" y="559.3906"/><rect fill="#FFFFFF" height="553.1699" style="stroke:#181818;stroke-width:1.0;" width="10" x="510" y="616.6563"/><rect fill="#FFFFFF" height="495.9043" style="stroke:#181818;stroke-width:1.0;" width="10" x="515" y="673.9219"/><rect fill="#FFFFFF" height="446.5938" style="stroke:#181818;stroke-width:1.0;" width="10" x="520" y="723.2324"/><rect fill="#FFFFFF" height="397.2832" style="stroke:#181818;stroke-width:1.0;" width="10" x="525" y="772.543"/><rect fill="#FFFFFF" height="354.9727" style="stroke:#181818;stroke-width:1.0;" width="10" x="530" y="814.8535"/><rect fill="#FFFFFF" height="312.6621" style="stroke:#181818;stroke-width:1.0;" width="10" x="535" y="857.1641"/><rect fill="#FFFFFF" height="270.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="540" y="899.4746"/><rect fill="#FFFFFF" height="228.041" style="stroke:#181818;stroke-width:1.0;" width="10" x="545" y="941.7852"/><rect fill="#FFFFFF" height="185.7305" style="stroke:#181818;stroke-width:1.0;" width="10" x="550" y="984.0957"/><rect fill="#FFFFFF" height="105.1094" style="stroke:#181818;stroke-width:1.0;" width="10" x="555" y="1026.4063"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="882" y="171.4199"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1090" y="296.6621"/><polygon fill="#181818" points="222,108.7988,232,112.7988,222,116.7988,226,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33" x2="228" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="40" y="108.0566">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="53" y="108.0566">GET/products/{sku}/rating</text><polygon fill="#181818" points="468,138.1094,478,142.1094,468,146.1094,472,142.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="244" x2="474" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="251" y="137.3672">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="264" y="137.3672">productService.findAllRates(sku)</text><polygon fill="#181818" points="870,167.4199,880,171.4199,870,175.4199,874,171.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="490" x2="876" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="497" y="166.6777">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261" x="510" y="166.6777">productRepository.findBySkuProduct(sku)</text><polygon fill="#181818" points="501,196.7305,491,200.7305,501,204.7305,497,200.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="495" x2="886" y1="200.7305" y2="200.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="507" y="195.9883">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="520" y="195.9883">product</text><line style="stroke:#181818;stroke-width:1.0;" x1="490" x2="537" y1="225.041" y2="225.041"/><line style="stroke:#181818;stroke-width:1.0;" x1="537" x2="537" y1="225.041" y2="238.041"/><line style="stroke:#181818;stroke-width:1.0;" x1="496" x2="537" y1="238.041" y2="238.041"/><polygon fill="#181818" points="506,234.041,496,238.041,506,242.041,502,238.041" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="502" y="220.2988">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="515" y="220.2988">list = product.getReviews()</text><path d="M354.5,258.041 L428.5,258.041 L428.5,265.3516 L418.5,275.3516 L354.5,275.3516 L354.5,258.041 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="478.1914" style="stroke:#000000;stroke-width:1.5;" width="813" x="354.5" y="258.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="369.5" y="271.6094">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142" x="443.5" y="270.6758">[for each "review" in list]</text><polygon fill="#181818" points="1078,292.6621,1088,296.6621,1078,300.6621,1082,296.6621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="495" x2="1084" y1="296.6621" y2="296.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="502" y="291.9199">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="515" y="291.9199">review.getRating()</text><polygon fill="#181818" points="506,321.9727,496,325.9727,506,329.9727,502,325.9727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="500" x2="1094" y1="325.9727" y2="325.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="512" y="321.2305">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="525" y="321.2305">rating</text><path d="M364.5,340.9727 L426.5,340.9727 L426.5,348.2832 L416.5,358.2832 L364.5,358.2832 L364.5,340.9727 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="345.9492" style="stroke:#000000;stroke-width:1.5;" width="265.5" x="364.5" y="340.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="379.5" y="354.541">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="165" x="441.5" y="353.6074">[rating &gt;= 0 &amp;&amp; rating &lt; 0.5]</text><line style="stroke:#181818;stroke-width:1.0;" x1="495" x2="542" y1="374.5938" y2="374.5938"/><line style="stroke:#181818;stroke-width:1.0;" x1="542" x2="542" y1="374.5938" y2="387.5938"/><line style="stroke:#181818;stroke-width:1.0;" x1="501" x2="542" y1="387.5938" y2="387.5938"/><polygon fill="#181818" points="511,383.5938,501,387.5938,511,391.5938,507,387.5938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="507" y="369.8516">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="520" y="369.8516">count0++</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="364.5" x2="630" y1="401.5938" y2="401.5938"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="175" x="369.5" y="412.2285">[rating &gt;= 0.5 &amp;&amp; rating &lt; 1.5]</text><line style="stroke:#181818;stroke-width:1.0;" x1="500" x2="547" y1="431.8594" y2="431.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="547" x2="547" y1="431.8594" y2="444.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="547" y1="444.8594" y2="444.8594"/><polygon fill="#181818" points="516,440.8594,506,444.8594,516,448.8594,512,444.8594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="512" y="427.1172">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="525" y="427.1172">count1++</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="364.5" x2="630" y1="458.8594" y2="458.8594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="175" x="369.5" y="469.4941">[rating &gt;= 1.5 &amp;&amp; rating &lt; 2.5]</text><line style="stroke:#181818;stroke-width:1.0;" x1="505" x2="552" y1="489.125" y2="489.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="552" x2="552" y1="489.125" y2="502.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="511" x2="552" y1="502.125" y2="502.125"/><polygon fill="#181818" points="521,498.125,511,502.125,521,506.125,517,502.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="517" y="484.3828">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="539" y="484.3828">count2++</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="364.5" x2="630" y1="516.125" y2="516.125"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="175" x="369.5" y="526.7598">[rating &gt;= 2.5 &amp;&amp; rating &lt; 3.5]</text><line style="stroke:#181818;stroke-width:1.0;" x1="510" x2="557" y1="546.3906" y2="546.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="557" x2="557" y1="546.3906" y2="559.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="516" x2="557" y1="559.3906" y2="559.3906"/><polygon fill="#181818" points="526,555.3906,516,559.3906,526,563.3906,522,559.3906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="522" y="541.6484">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="544" y="541.6484">count3++</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="364.5" x2="630" y1="573.3906" y2="573.3906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="175" x="369.5" y="584.0254">[rating &gt;= 3.5 &amp;&amp; rating &lt; 4.5]</text><line style="stroke:#181818;stroke-width:1.0;" x1="515" x2="562" y1="603.6563" y2="603.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="562" x2="562" y1="603.6563" y2="616.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="562" y1="616.6563" y2="616.6563"/><polygon fill="#181818" points="531,612.6563,521,616.6563,531,620.6563,527,616.6563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="527" y="598.9141">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="549" y="598.9141">count4++</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="364.5" x2="630" y1="630.6563" y2="630.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="369.5" y="641.291">[rating &gt;= 4.5 &amp;&amp; rating &lt;= 5]</text><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="567" y1="660.9219" y2="660.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="567" x2="567" y1="660.9219" y2="673.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="526" x2="567" y1="673.9219" y2="673.9219"/><polygon fill="#181818" points="536,669.9219,526,673.9219,536,677.9219,532,673.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="532" y="656.1797">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="554" y="656.1797">count5++</text><line style="stroke:#181818;stroke-width:1.0;" x1="525" x2="572" y1="710.2324" y2="710.2324"/><line style="stroke:#181818;stroke-width:1.0;" x1="572" x2="572" y1="710.2324" y2="723.2324"/><line style="stroke:#181818;stroke-width:1.0;" x1="531" x2="572" y1="723.2324" y2="723.2324"/><polygon fill="#181818" points="541,719.2324,531,723.2324,541,727.2324,537,723.2324" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="537" y="705.4902">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="559" y="705.4902">soma+=rating</text><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="577" y1="759.543" y2="759.543"/><line style="stroke:#181818;stroke-width:1.0;" x1="577" x2="577" y1="759.543" y2="772.543"/><line style="stroke:#181818;stroke-width:1.0;" x1="536" x2="577" y1="772.543" y2="772.543"/><polygon fill="#181818" points="546,768.543,536,772.543,546,776.543,542,772.543" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="542" y="754.8008">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="564" y="754.8008">frequency0 = ((float) count0) / list.size() * 100</text><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="582" y1="801.8535" y2="801.8535"/><line style="stroke:#181818;stroke-width:1.0;" x1="582" x2="582" y1="801.8535" y2="814.8535"/><line style="stroke:#181818;stroke-width:1.0;" x1="541" x2="582" y1="814.8535" y2="814.8535"/><polygon fill="#181818" points="551,810.8535,541,814.8535,551,818.8535,547,814.8535" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="547" y="797.1113">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="569" y="797.1113">frequency1 = ((float) count1) / list.size() * 100</text><line style="stroke:#181818;stroke-width:1.0;" x1="540" x2="587" y1="844.1641" y2="844.1641"/><line style="stroke:#181818;stroke-width:1.0;" x1="587" x2="587" y1="844.1641" y2="857.1641"/><line style="stroke:#181818;stroke-width:1.0;" x1="546" x2="587" y1="857.1641" y2="857.1641"/><polygon fill="#181818" points="556,853.1641,546,857.1641,556,861.1641,552,857.1641" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="552" y="839.4219">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="574" y="839.4219">frequency2 = ((float) count2) / list.size() * 100</text><line style="stroke:#181818;stroke-width:1.0;" x1="545" x2="592" y1="886.4746" y2="886.4746"/><line style="stroke:#181818;stroke-width:1.0;" x1="592" x2="592" y1="886.4746" y2="899.4746"/><line style="stroke:#181818;stroke-width:1.0;" x1="551" x2="592" y1="899.4746" y2="899.4746"/><polygon fill="#181818" points="561,895.4746,551,899.4746,561,903.4746,557,899.4746" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="557" y="881.7324">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="579" y="881.7324">frequency3 = ((float) count3) / list.size() * 100</text><line style="stroke:#181818;stroke-width:1.0;" x1="550" x2="597" y1="928.7852" y2="928.7852"/><line style="stroke:#181818;stroke-width:1.0;" x1="597" x2="597" y1="928.7852" y2="941.7852"/><line style="stroke:#181818;stroke-width:1.0;" x1="556" x2="597" y1="941.7852" y2="941.7852"/><polygon fill="#181818" points="566,937.7852,556,941.7852,566,945.7852,562,941.7852" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="562" y="924.043">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="584" y="924.043">frequency4 = ((float) count4) / list.size() * 100</text><line style="stroke:#181818;stroke-width:1.0;" x1="555" x2="602" y1="971.0957" y2="971.0957"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="602" y1="971.0957" y2="984.0957"/><line style="stroke:#181818;stroke-width:1.0;" x1="561" x2="602" y1="984.0957" y2="984.0957"/><polygon fill="#181818" points="571,980.0957,561,984.0957,571,988.0957,567,984.0957" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="567" y="966.3535">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="589" y="966.3535">frequency5 = ((float) count5) / list.size() * 100</text><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="607" y1="1013.4063" y2="1013.4063"/><line style="stroke:#181818;stroke-width:1.0;" x1="607" x2="607" y1="1013.4063" y2="1026.4063"/><line style="stroke:#181818;stroke-width:1.0;" x1="566" x2="607" y1="1026.4063" y2="1026.4063"/><polygon fill="#181818" points="576,1022.4063,566,1026.4063,576,1030.4063,572,1026.4063" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="572" y="1008.6641">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="594" y="1008.6641">average = soma / list.size();</text><polygon fill="#181818" points="1603,1056.7168,1613,1060.7168,1603,1064.7168,1607,1060.7168" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="565" x2="1609" y1="1060.7168" y2="1060.7168"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="572" y="1055.9746">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="1004" x="594" y="1055.9746">new AggregateRating(sku, average, count0, count1, count2, count3, count4, count5, frequency0, frequency1, frequency2, frequency3, frequency4, frequency5);</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="248" x="1615" y="1039.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="234" x="1622" y="1059.9414">aggregateRating:AggregateRating</text><polygon fill="#181818" points="576,1098.2051,566,1102.2051,576,1106.2051,572,1102.2051" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="570" x2="1738" y1="1102.2051" y2="1102.2051"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="582" y="1097.4629">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="604" y="1097.4629">aggregateRating</text><polygon fill="#181818" points="255,1127.5156,245,1131.5156,255,1135.5156,251,1131.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="249" x2="549" y1="1131.5156" y2="1131.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="261" y="1126.7734">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="283" y="1126.7734">aggregateRating</text><polygon fill="#181818" points="44,1156.8262,34,1160.8262,44,1164.8262,40,1160.8262" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38" x2="238" y1="1160.8262" y2="1160.8262"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="50" y="1156.084">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="72" y="1156.084">aggregateRating</text><!--MD5=[afe22c84a493f4b2b9c0c18d9dcbe14d]
@startuml
'https://plantuml.com/sequence-diagram

autoactivate on
autonumber

actor "Client" as Client
participant "ProductController" as Ctrl
participant "productService:ProductService" as Svc
participant "productRepository:ProductRepository" as Repo
participant "product:Product" as product
participant "aggregateRating:AggregateRating" as aggregateRating

activate Client

Client -> Ctrl : GET/products/{sku}/rating
Ctrl -> Svc : productService.findAllRates(sku)
Svc -> Repo: productRepository.findBySkuProduct(sku)
Repo - -> Svc: product
Svc -> Svc: list = product.getReviews()
loop for each "review" in list
    Svc -> product: review.getRating()
    product - -> Svc: rating
    alt rating >= 0 && rating < 0.5
    Svc -> Svc: count0++
    else rating >= 0.5 && rating < 1.5
    Svc -> Svc: count1++
    else rating >= 1.5 && rating < 2.5
    Svc -> Svc: count2++
    else rating >= 2.5 && rating < 3.5
    Svc -> Svc: count3++
    else rating >= 3.5 && rating < 4.5
    Svc -> Svc: count4++
    else rating >= 4.5 && rating <= 5
    Svc -> Svc: count5++
    end
    Svc -> Svc: soma+=rating
    end loop

    Svc -> Svc: frequency0 = ((float) count0) / list.size() * 100
    Svc -> Svc: frequency1 = ((float) count1) / list.size() * 100
    Svc -> Svc: frequency2 = ((float) count2) / list.size() * 100
    Svc -> Svc: frequency3 = ((float) count3) / list.size() * 100
    Svc -> Svc: frequency4 = ((float) count4) / list.size() * 100
    Svc -> Svc: frequency5 = ((float) count5) / list.size() * 100
    Svc -> Svc: average = soma / list.size();
    Svc -> aggregateRating**: new AggregateRating(sku, average, count0, count1, count2, count3, count4, count5, frequency0, frequency1, frequency2, frequency3, frequency4, frequency5);
    aggregateRating - -> Svc: aggregateRating
    Svc - -> Ctrl: aggregateRating
    Ctrl - -> Client: aggregateRating




@enduml

@startuml

autoactivate on
autonumber

actor "Client" as Client
participant "ProductController" as Ctrl
participant "productService:ProductService" as Svc
participant "productRepository:ProductRepository" as Repo
participant "product:Product" as product
participant "aggregateRating:AggregateRating" as aggregateRating

activate Client

Client -> Ctrl : GET/products/{sku}/rating
Ctrl -> Svc : productService.findAllRates(sku)
Svc -> Repo: productRepository.findBySkuProduct(sku)
Repo - -> Svc: product
Svc -> Svc: list = product.getReviews()
loop for each "review" in list
    Svc -> product: review.getRating()
    product - -> Svc: rating
    alt rating >= 0 && rating < 0.5
    Svc -> Svc: count0++
    else rating >= 0.5 && rating < 1.5
    Svc -> Svc: count1++
    else rating >= 1.5 && rating < 2.5
    Svc -> Svc: count2++
    else rating >= 2.5 && rating < 3.5
    Svc -> Svc: count3++
    else rating >= 3.5 && rating < 4.5
    Svc -> Svc: count4++
    else rating >= 4.5 && rating <= 5
    Svc -> Svc: count5++
    end
    Svc -> Svc: soma+=rating
    end loop

    Svc -> Svc: frequency0 = ((float) count0) / list.size() * 100
    Svc -> Svc: frequency1 = ((float) count1) / list.size() * 100
    Svc -> Svc: frequency2 = ((float) count2) / list.size() * 100
    Svc -> Svc: frequency3 = ((float) count3) / list.size() * 100
    Svc -> Svc: frequency4 = ((float) count4) / list.size() * 100
    Svc -> Svc: frequency5 = ((float) count5) / list.size() * 100
    Svc -> Svc: average = soma / list.size();
    Svc -> aggregateRating**: new AggregateRating(sku, average, count0, count1, count2, count3, count4, count5, frequency0, frequency1, frequency2, frequency3, frequency4, frequency5);
    aggregateRating - -> Svc: aggregateRating
    Svc - -> Ctrl: aggregateRating
    Ctrl - -> Client: aggregateRating




@enduml

PlantUML version 1.2022.4(Sat Apr 09 14:29:17 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: pt
Country: PT
--></g></svg>