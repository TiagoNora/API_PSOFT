<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="807px" preserveAspectRatio="none" style="width:1616px;height:807px;background:#FFFFFF;" version="1.1" viewBox="0 0 1616 807" width="1616px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="626.0332" style="stroke:#181818;stroke-width:1.0;" width="10" x="23" y="91.4883"/><rect fill="#FFFFFF" height="595.7227" style="stroke:#181818;stroke-width:1.0;" width="10" x="267" y="112.7988"/><rect fill="#FFFFFF" height="575.4121" style="stroke:#181818;stroke-width:1.0;" width="10" x="564" y="142.1094"/><rect fill="#FFFFFF" height="420.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="569" y="296.6621"/><rect fill="#FFFFFF" height="354.2383" style="stroke:#181818;stroke-width:1.0;" width="10" x="574" y="363.2832"/><rect fill="#FFFFFF" height="258.6621" style="stroke:#181818;stroke-width:1.0;" width="10" x="579" y="420.5488"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="918" y="171.4199"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1171" y="230.041"/><rect fill="#FFFFFF" height="214.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1332.5" y="503.3477"/><rect fill="#FFFFFF" height="184.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="1337.5" y="532.6582"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1342.5" y="561.9688"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1493.5" y="620.5898"/><rect height="116.8867" style="stroke:#000000;stroke-width:1.5;fill:none;" width="463" x="465" y="316.6621"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="81.4883" y2="726.5215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="272" x2="272" y1="81.4883" y2="726.5215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="569" x2="569" y1="81.4883" y2="726.5215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="922.5" x2="922.5" y1="81.4883" y2="726.5215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1175.5" x2="1175.5" y1="81.4883" y2="726.5215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1337.5" x2="1337.5" y1="471.293" y2="726.5215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1498.5" x2="1498.5" y1="81.4883" y2="726.5215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="5" y="78.5352">Client</text><ellipse cx="28" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28,21.5 L28,48.5 M15,29.5 L41,29.5 M28,48.5 L15,63.5 M28,48.5 L41,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="5" y="739.0566">Client</text><ellipse cx="28" cy="750.5098" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28,758.5098 L28,785.5098 M15,766.5098 L41,766.5098 M28,785.5098 L15,800.5098 M28,785.5098 L41,800.5098 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="211" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="218" y="70.5352">VotesController</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="211" y="725.5215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="218" y="746.0566">VotesController</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="475" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="482" y="70.5352">votesService:VotesService</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="475" y="725.5215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="482" y="746.0566">votesService:VotesService</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="261" x="792.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="799.5" y="70.5352">reviewRepository:ProductRepository</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="261" x="792.5" y="725.5215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="799.5" y="746.0566">reviewRepository:ProductRepository</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="1063.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211" x="1070.5" y="70.5352">userRepository:UserRepository</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="1063.5" y="725.5215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211" x="1070.5" y="746.0566">userRepository:UserRepository</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1298.5" y="725.5215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1305.5" y="746.0566">vote:Vote</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="224" x="1386.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="1393.5" y="70.5352">voteRepository:VoteRepository</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="224" x="1386.5" y="725.5215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="1393.5" y="746.0566">voteRepository:VoteRepository</text><rect fill="#FFFFFF" height="626.0332" style="stroke:#181818;stroke-width:1.0;" width="10" x="23" y="91.4883"/><rect fill="#FFFFFF" height="595.7227" style="stroke:#181818;stroke-width:1.0;" width="10" x="267" y="112.7988"/><rect fill="#FFFFFF" height="575.4121" style="stroke:#181818;stroke-width:1.0;" width="10" x="564" y="142.1094"/><rect fill="#FFFFFF" height="420.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="569" y="296.6621"/><rect fill="#FFFFFF" height="354.2383" style="stroke:#181818;stroke-width:1.0;" width="10" x="574" y="363.2832"/><rect fill="#FFFFFF" height="258.6621" style="stroke:#181818;stroke-width:1.0;" width="10" x="579" y="420.5488"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="918" y="171.4199"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1171" y="230.041"/><rect fill="#FFFFFF" height="214.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1332.5" y="503.3477"/><rect fill="#FFFFFF" height="184.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="1337.5" y="532.6582"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1342.5" y="561.9688"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1493.5" y="620.5898"/><polygon fill="#181818" points="255,108.7988,265,112.7988,255,116.7988,259,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33" x2="261" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="40" y="108.0566">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="53" y="108.0566">POST /votes/{idReview}/{idUser}</text><polygon fill="#181818" points="552,138.1094,562,142.1094,552,146.1094,556,142.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277" x2="558" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="284" y="137.3672">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="297" y="137.3672">service.create(resource,idReview,idUser);</text><polygon fill="#181818" points="906,167.4199,916,171.4199,906,175.4199,910,171.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="574" x2="912" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="581" y="166.6777">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="594" y="166.6777">repository.findByIdReview(idReview)</text><polygon fill="#181818" points="585,196.7305,575,200.7305,585,204.7305,581,200.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="579" x2="922" y1="200.7305" y2="200.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="591" y="195.9883">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="604" y="195.9883">review</text><polygon fill="#181818" points="1159,226.041,1169,230.041,1159,234.041,1163,230.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="574" x2="1165" y1="230.041" y2="230.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="581" y="225.2988">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="594" y="225.2988">repository.findByIdReview(idUser)</text><polygon fill="#181818" points="585,255.3516,575,259.3516,585,263.3516,581,259.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="579" x2="1175" y1="259.3516" y2="259.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="591" y="254.6094">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="604" y="254.6094">user</text><line style="stroke:#181818;stroke-width:1.0;" x1="574" x2="621" y1="283.6621" y2="283.6621"/><line style="stroke:#181818;stroke-width:1.0;" x1="621" x2="621" y1="283.6621" y2="296.6621"/><line style="stroke:#181818;stroke-width:1.0;" x1="580" x2="621" y1="296.6621" y2="296.6621"/><polygon fill="#181818" points="590,292.6621,580,296.6621,590,300.6621,586,296.6621" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="586" y="278.9199">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="599" y="278.9199">review.setTotalVotes(review.getTotalVotes()+1)</text><path d="M465,316.6621 L527,316.6621 L527,323.9727 L517,333.9727 L465,333.9727 L465,316.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.8867" style="stroke:#000000;stroke-width:1.5;" width="463" x="465" y="316.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="480" y="330.2305">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="157" x="542" y="329.2969">[resource.getVote() == true]</text><line style="stroke:#181818;stroke-width:1.0;" x1="579" x2="626" y1="350.2832" y2="350.2832"/><line style="stroke:#181818;stroke-width:1.0;" x1="626" x2="626" y1="350.2832" y2="363.2832"/><line style="stroke:#181818;stroke-width:1.0;" x1="585" x2="626" y1="363.2832" y2="363.2832"/><polygon fill="#181818" points="595,359.2832,585,363.2832,595,367.2832,591,363.2832" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="591" y="345.541">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="604" y="345.541">review.setUpVotes(review.getUpVotes()+1)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="465" x2="928" y1="377.2832" y2="377.2832"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="162" x="470" y="387.918">[resource.getVote() == false]</text><line style="stroke:#181818;stroke-width:1.0;" x1="584" x2="631" y1="407.5488" y2="407.5488"/><line style="stroke:#181818;stroke-width:1.0;" x1="631" x2="631" y1="407.5488" y2="420.5488"/><line style="stroke:#181818;stroke-width:1.0;" x1="590" x2="631" y1="420.5488" y2="420.5488"/><polygon fill="#181818" points="600,416.5488,590,420.5488,600,424.5488,596,420.5488" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="596" y="402.8066">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="307" x="609" y="402.8066">review.setDownVotes(review.getDownVotes()+1);</text><polygon fill="#181818" points="1286.5,457.8594,1296.5,461.8594,1286.5,465.8594,1290.5,461.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="589" x2="1292.5" y1="461.8594" y2="461.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="596" y="457.1172">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="618" y="457.1172">new()</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1298.5" y="440.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1305.5" y="461.084">vote:Vote</text><polygon fill="#181818" points="1320.5,499.3477,1330.5,503.3477,1320.5,507.3477,1324.5,503.3477" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="589" x2="1326.5" y1="503.3477" y2="503.3477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="596" y="498.6055">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="618" y="498.6055">setVote(resource.getVote());</text><polygon fill="#181818" points="1325.5,528.6582,1335.5,532.6582,1325.5,536.6582,1329.5,532.6582" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="589" x2="1331.5" y1="532.6582" y2="532.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="596" y="527.916">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="618" y="527.916">setUser(user);</text><polygon fill="#181818" points="1330.5,557.9688,1340.5,561.9688,1330.5,565.9688,1334.5,561.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="589" x2="1336.5" y1="561.9688" y2="561.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="596" y="557.2266">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="618" y="557.2266">setReview(review)</text><polygon fill="#181818" points="600,587.2793,590,591.2793,600,595.2793,596,591.2793" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="594" x2="1336.5" y1="591.2793" y2="591.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="606" y="586.5371">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="628" y="586.5371">vote</text><polygon fill="#181818" points="1481.5,616.5898,1491.5,620.5898,1481.5,624.5898,1485.5,620.5898" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="589" x2="1487.5" y1="620.5898" y2="620.5898"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="596" y="615.8477">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="618" y="615.8477">save(vote)</text><polygon fill="#181818" points="600,645.9004,590,649.9004,600,653.9004,596,649.9004" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="594" x2="1497.5" y1="649.9004" y2="649.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="606" y="645.1582">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="628" y="645.1582">ok</text><polygon fill="#181818" points="288,675.2109,278,679.2109,288,683.2109,284,679.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="282" x2="573" y1="679.2109" y2="679.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="294" y="674.4688">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="316" y="674.4688">ok</text><polygon fill="#181818" points="44,704.5215,34,708.5215,44,712.5215,40,708.5215" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38" x2="271" y1="708.5215" y2="708.5215"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="50" y="703.7793">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="72" y="703.7793">ok</text><!--MD5=[abe9f3d3386866b39fae627f1f456f64]
@startuml
'https://plantuml.com/sequence-diagram


autoactivate on
autonumber

actor "Client" as User
participant "VotesController" as Ctrl
participant "votesService:VotesService" as service
participant "reviewRepository:ProductRepository" as reviewRepo
participant "userRepository:UserRepository" as userRepo
participant "vote:Vote" as vote
participant "voteRepository:VoteRepository" as voteRepo




activate User
User -> Ctrl : POST /votes/{idReview}/{idUser}
Ctrl -> service : service.create(resource,idReview,idUser);
service -> reviewRepo: repository.findByIdReview(idReview)
reviewRepo - -> service: review
service -> userRepo: repository.findByIdReview(idUser)
userRepo - -> service: user
service -> service: review.setTotalVotes(review.getTotalVotes()+1)
alt resource.getVote() == true
    service -> service: review.setUpVotes(review.getUpVotes()+1)
else resource.getVote() == false
    service -> service:review.setDownVotes(review.getDownVotes()+1);
end
service -> vote**: new()
service -> vote: setVote(resource.getVote());
service -> vote: setUser(user);
service -> vote: setReview(review)
vote - -> service: vote
service -> voteRepo: save(vote)
voteRepo - -> service: ok
service - -> Ctrl: ok
Ctrl - -> User: ok

@enduml

@startuml


autoactivate on
autonumber

actor "Client" as User
participant "VotesController" as Ctrl
participant "votesService:VotesService" as service
participant "reviewRepository:ProductRepository" as reviewRepo
participant "userRepository:UserRepository" as userRepo
participant "vote:Vote" as vote
participant "voteRepository:VoteRepository" as voteRepo




activate User
User -> Ctrl : POST /votes/{idReview}/{idUser}
Ctrl -> service : service.create(resource,idReview,idUser);
service -> reviewRepo: repository.findByIdReview(idReview)
reviewRepo - -> service: review
service -> userRepo: repository.findByIdReview(idUser)
userRepo - -> service: user
service -> service: review.setTotalVotes(review.getTotalVotes()+1)
alt resource.getVote() == true
    service -> service: review.setUpVotes(review.getUpVotes()+1)
else resource.getVote() == false
    service -> service:review.setDownVotes(review.getDownVotes()+1);
end
service -> vote**: new()
service -> vote: setVote(resource.getVote());
service -> vote: setUser(user);
service -> vote: setReview(review)
vote - -> service: vote
service -> voteRepo: save(vote)
voteRepo - -> service: ok
service - -> Ctrl: ok
Ctrl - -> User: ok

@enduml

PlantUML version 1.2022.4(Sat Apr 09 14:29:17 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: pt
Country: PT
--></g></svg>